# Disable software flow control
stty -ixon

# Set default visual editor
export VISUAL="vim"

# Prefix Bash prompt if started inside Vim
if [ -v VIM ]; then
    PS1="[vim] $PS1"
fi

# Add Bash hook to enable direnv
if (command -v direnv > /dev/null); then
    eval "$(direnv hook bash)"
fi

# Set aliases for Nix
if (command -v nix > /dev/null); then
    alias ncg="nix-collect-garbage --delete-old"
    alias nrc="nix shell --file default.nix -c" "$@"
fi

# Bash completions for cargo and rustup
if (command -v rustup > /dev/null); then
    eval "$(rustup completions bash cargo)"
    eval "$(rustup completions bash rustup)"
fi

# Bash completions for pipx
if (command -v pipx > /dev/null); then
    eval "$(register-python-argcomplete pipx)"
fi

# Set alias for bulk renaming files using qmv
if (command -v qmv > /dev/null); then
    alias bulk-rename="qmv --format=destination-only" "$@"
fi

# Configure Ansible
export ANSIBLE_CALLBACKS_ENABLED="profile_tasks"
export ANSIBLE_RETRY_FILES_ENABLED="False"

# Configure GPG
GPG_TTY="$(tty)"
export GPG_TTY

# Configure Password Store
export PASSWORD_STORE_DIR="${HOME}/Documents/secrets"

# Configure pipx
export USE_EMOJI="False"

# Configure pytest
export PYTEST_ADDOPTS="-vv"
export PYTEST_THEME="dracula"
export PYTEST_THEME_MODE="dark"
